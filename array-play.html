<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      let john = { name: "John", age: 25 };
      let pete = { name: "Pete", age: 30 };
      let mary = { name: "Mary", age: 29 };
      let marty = { name: "Marty", age: 35 };

      let arrNames = [john, pete, mary, marty];

      function getAverageAge(inArr) {
        let sumAge = 0;

        for (const person of arrNames) {
          sumAge += person.age;
        }

        return sumAge / arrNames.length;
      }

      console.log(Math.floor(getAverageAge(arrNames))); // (25 + 30 + 29) / 3 = 28

      function sumOfTripledEvens(array) {
        return array
          .filter((num) => num % 2 === 0)
          .map((num) => num * 3)
          .reduce((acc, curr) => acc + curr);
      }

      function camelize(inString) {
        let retStringArray = inString.split("-").map((arrItem, index) => {
          if (index > 0 && arrItem.length > 0) {
            return arrItem.charAt(0).toUpperCase() + arrItem.slice(1);
          } else {
            return arrItem;
          }
        });
        return retStringArray.join("");
      }

      console.log(camelize("background-color")); // == 'backgroundColor'
      console.log(camelize("list-style-image")); // == 'listStyleImage'
      console.log(camelize("-webkit-transition")); // == 'WebkitTransition'

      let arr = [5, 3, 8, 1];

      function filterRange(arrIn, a, b) {
        let retInPlace = arrIn.filter((num) => num >= a && num >= b);
        let retArrF = arrIn.filter((num) => num >= a && num <= b);
        return retArrF.join(",");
      }

      let filtered = filterRange(arr, 1, 4);

      console.log(filtered); // 3,1 (matching values)

      console.log(arr); // 5,3,8,1 (not modified)

      //Decending sort
      //arr.sort((a, b) => b - a);

      function copySorted(arr) {
        return arr.slice().sort();
      }

      arr = ["HTML", "JavaScript", "CSS"];

      let sorted = copySorted(arr);

      //alert(sorted);
      //alert(arr);

      function Calculator() {
        this.methods = {
          "-": (a, b) => a - b,
          "+": (a, b) => a + b,
        };

        this.calculate = function (str) {
          let split = str.split(" "),
            a = +split[0],
            op = split[1],
            b = +split[2];

          if (!this.methods[op] || isNaN(a) || isNaN(b)) {
            return NaN;
          }

          return this.methods[op](a, b);
        };

        this.addMethod = function (name, func) {
          this.methods[name] = func;
        };
      }

      let calc = new Calculator();

      //alert(calc.calculate("3 + 7")); // 10

      let powerCalc = new Calculator();
      powerCalc.addMethod("*", (a, b) => a * b);
      powerCalc.addMethod("/", (a, b) => a / b);
      powerCalc.addMethod("**", (a, b) => a ** b);

      let result = powerCalc.calculate("2 ** 3");
      //   alert(result); // 8

      let johnN = { name: "John", age: 25 };
      let peteN = { name: "Pete", age: 30 };
      let maryN = { name: "Mary", age: 28 };

      let users = [johnN, peteN, maryN];

      let names = users.map((userObj) => userObj.name);

      //alert(names); // John, Pete, Mary

      let johnK = { name: "John", surname: "Smith", id: 1 };
      let peteK = { name: "Pete", surname: "Hunt", id: 2 };
      let maryK = { name: "Mary", surname: "Key", id: 3 };

      let usersK = [johnK, peteK, maryK];

      let usersMapped = usersK.map((userObj) => {
        return {
          fullName: userObj.name + " " + userObj.surname,
          id: userObj.id,
        };
      });

      //   alert(usersMapped[0].id); // 1
      //   alert(usersMapped[0].fullName); // John Smith

      function sortByAge(arr) {
        arr.sort((a, b) => a.age - b.age);
      }

      // let john = { name: "John", age: 25 };
      // let pete = { name: "Pete", age: 30 };
      // let mary = { name: "Mary", age: 28 };

      // let arr = [ pete, john, mary ];

      // sortByAge(arr);

      // // now sorted is: [john, mary, pete]
      // alert(arr[0].name); // John
      // alert(arr[1].name); // Mary
      // alert(arr[2].name); // Pete

      function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
          let j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
      }

      function getAverageAge(users) {
        return users.reduce((prev, user) => prev + user.age, 0) / users.length;
      }

      let johnA = { name: "John", age: 25 };
      let peteA = { name: "Pete", age: 30 };
      let maryA = { name: "Mary", age: 29 };

      let arrA = [johnA, peteA, maryA];

      //   alert(getAverageAge(arr)); // 28

      function unique(arr) {
        let result = [];

        for (let str of arr) {
          if (!result.includes(str)) {
            result.push(str);
          }
        }

        return result;
      }

      let strings = [
        "Hare",
        "Krishna",
        "Hare",
        "Krishna",
        "Krishna",
        "Krishna",
        "Hare",
        "Hare",
        ":-O",
      ];

      alert(unique(strings)); // Hare, Krishna, :-O

      let usersG = [
        { id: "john", name: "John Smith", age: 20 },
        { id: "ann", name: "Ann Smith", age: 24 },
        { id: "pete", name: "Pete Peterson", age: 31 },
      ];

      function groupById(array) {
        return array.reduce((obj, value) => {
          obj[value.id] = value;
          return obj;
        }, {});
      }

      let usersById = groupById(usersG);
      console.log(usersById);

      /*
      // after the call we should have:

      usersById = {
        john: {id: 'john', name: "John Smith", age: 20},
        ann: {id: 'ann', name: "Ann Smith", age: 24},
        pete: {id: 'pete', name: "Pete Peterson", age: 31},
      }
      */
    </script>
  </body>
</html>
